<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eCommerce</title>
    <link rel="stylesheet" href="./styles.css">
</head>

<body>
    <nav class="navBar" id="navBar">
        <a href="./">
            <img src="./home.png" alt="Logo">
        </a>

        <!--(Search Bar)-->

        <a href="./LogIn.html" id="LogInButton">
            <div>
                Log In
            </div>
        </a>

    </nav>
    <div id="catalog">

    </div>
    <script id="jsonDB" type="application/json">
        {
            "database":[
                {"productImageURL":"./sneaker.jpg",
                "productTitle":"Shiny Sneaker",
                "productPrice": "$3.00",
                "Inventory": 100,
                "productDescription": "White Sneaker that shines",
                "id":1},
                {"productImageURL":"./sneaker.jpg",
                "productTitle":"More Shiny Sneaker",
                "productPrice": "$30.00",
                "Inventory": 100,
                "productDescription": "White Sneaker that shines more",
                "id":2},
                {"productImageURL":"./sneaker.jpg",
                "productTitle":"Most Shiny Sneaker",
                "productPrice": "$300.00",
                "Inventory": 1,
                "productDescription": "Its very shiny",
                "id":3}
            ]
        }
    </script>
    <script>
        const databaseJson = document.getElementById("jsonDB")
        const databaseParse = JSON.parse(databaseJson.textContent)
        const database = databaseParse.database
        
        const catalog = document.getElementById("catalog")

        for(const item of database){
            const div = document.createElement("div")
            const image = document.createElement("img")
            const title = document.createElement("h4")
            const desc = document.createElement("p")
            const inv = document.createElement("div")
            const price = document.createElement("div")
            const buyButton = document.createElement("a")
            //const addCartButton = document.createElement("button")

            image.src = item.productImageURL
            image.alt = "Product Image"
            image.className = "productImage"

            title.innerHTML = item.productTitle
            title.className = "productTitle"

            desc.innerHTML = item.productDescription
            desc.className = "productDesc"

            inv.innerHTML = item.Inventory + " Available"
            inv.className = "productInv" 
        
            price.innerHTML = item.productPrice
            price.className = "productPrice"

            //TODO Add Cart Functions

            buyButton.href = "./Product/"+item.id
            buyButton.innerHTML = "Buy Now!"
            buyButton.className = "productBuyButton"

            const divy = document.createElement("div")
            divy.className = "productBuySection"
            divy.appendChild(price)
            divy.appendChild(buyButton)

            div.appendChild(image)
            div.appendChild(title)
            div.appendChild(desc)
            div.appendChild(divy)
            div.appendChild(inv)
            div.className = "productHold"

            catalog.appendChild(div)
        }

        const LogIn = document.getElementById("LogInButton")
        const navBar = document.getElementById("navBar")
        const userInfo = sessionStorage.getItem("user")

        if (userInfo != null) {
            LogIn.remove()

            const dropdownA = document.createElement("a")
            const dropdownButton = document.createElement("div")
            const division = document.createElement("div")

            /*dropdownA.href = "./client.html"
            dropdownA.innerHTML = "Account"
            dropdownA.className = "DropDownLogInContent"*/

            dropdownButton.addEventListener("click", () => {

            })
            dropdownButton.innerHTML = "Log Out"
            dropdownButton.className = "DropDownLogInContent"
            dropdownButton.id = "DropDownLogInButton"
            dropdownButton.addEventListener("click", () => {
                sessionStorage.removeItem("user")
                window.location.reload()
            })

            division.innerHTML = userInfo
            division.className = "DropDownLogInMenu"
            /* division.appendChild(dropdownA)    */
            division.appendChild(dropdownButton)

            navBar.appendChild(division)
        }
    </script>
</body>

</html>